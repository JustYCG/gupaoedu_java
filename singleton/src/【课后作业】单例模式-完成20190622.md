**学号：GP019239**

**课程内容：单例模式详解**



# 作业内容

------

1、熟练掌握单例模式的常见写法。

2、总结每种单例写法的优、缺点。

3、思考破坏单例模式的方式有哪些？并且归纳总结。

4、梳理内部类的执行逻辑，并画出时序图。

------

**优点：优化内存资源**

**缺点：没有接口，不便于拓展**



> A1:代码。



> A2：

饿汉：线程安全；直接实例化，占用浪费空间资源。



懒汉：用到时再实例化，节省空间；线程不安全。

​	懒汉线程安全问题：

​		双重锁：syschronized+volatile关键字，线程安全，解决性能问题。

​		静态内部类：利用静态内部类的特性，实现懒汉单例，内部类的实现是饿汉。



序列化：重写readResolve方法，覆盖被反序列化破坏的单例。



注册式(将每一个实例都缓存到统一的容器中，使用唯一标志获取单例)：

​	`枚举:枚举（《effective java》 推荐），Enum.valueOf(class,name);jdk层面（new instance()中Modifer.ENUM）保证不被反射、序列化破坏。`

​	容器(spring 主要采用此种方式):

> A3:

​	1、反射攻击单例

​	2、序列化、反序列化（fileinputStream、fileOutputStream）



> A4:

​	获取实例方法--->调用静态内部类--->实例化外部类(判断是否为空)赋值给静态内部类值--->返回静态内部类值。

> ​	内部类特点：
>
> ​		内部类成员可以直接访问外部类私有数据，内部类被当为外部成员，但是外部类不能访问内部类的实现细节，例如内部类成员变量。

​	

## 提交地址

https://gper.gupaoedu.com/homework/subjects/11